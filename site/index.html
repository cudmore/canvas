



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="./assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.1, mkdocs-material-2.0.4">
    
    
      
        <title>Canvas</title>
      
    
    
      <link rel="stylesheet" href="./assets/stylesheets/application-709eec9410.css">
      
    
    
      <script src="./assets/javascripts/modernizr-e826f8942a.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="Canvas" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
            
            Home
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="http://github.com/cudmore/Canvas" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Canvas
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="http://github.com/cudmore/Canvas" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Home
      </label>
    
    <a href="." title="Home" class="md-nav__link md-nav__link--active">
      Home
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-requirements" title="Hardware Requirements" class="md-nav__link">
    Hardware Requirements
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" title="Overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hardware-requirements" title="Hardware Requirements" class="md-nav__link">
    Hardware Requirements
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Home</h1>
                
                <p>Canvas is software to acquire and visualize spatially organized video and image volumes in 'objective' space.</p>
<p>This is most useful when performing repeated imaging through a cranial window as it allows disjoint images to be acquired repeatedly across timescale of minutes, days, and months.</p>
<p><IMG SRC="../img/canvas-example-1"></p>
<h2 id="overview">Overview</h2>
<ul>
<li>Create a Canvas that visually places each video image and ScanImage .tif file into a unified ‘motor space’.</li>
<li>Capture single frame video images from any USB camera</li>
<li>Import .tif images acquired with either ScanImage or Prairie View</li>
<li>Previous canvases can be loaded and displayed using the Stack Browser.</li>
<li>Quickly and easily acquire the same fields-of-view both within and between time-points spanning minutes, hours, days and months.</li>
</ul>
<p>This is designed to work on any scope that has a computer controlled objective or an x/y stage. It has been tested using x/y/z objective motors using a Sutter mp285 controller and a Bruker Scope using PRairie View software.</p>
<h2 id="hardware-requirements">Hardware Requirements</h2>
<ul>
<li>Windows 7 or Windows XP</li>
<li>Igor Pro 6 or 7</li>
<li>Sutter Instruments mp285 motor controller (web page)</li>
<li>Prairie view</li>
<li>ScanImage 3.6 – 3.8 (web page)</li>
<li>Any USB video camera</li>
</ul>
<p>Third-party software to create virtual serial ports to share the mp285 motor controller.
Video to usb. This can be very cheap, we use EasyCap DC60 found here ($10-$20). Converters like this take an analog video signal, convert it to USB and then single frames or video is captured within Igor Pro using their free driver.</p>
<p>Virtual Serial Ports. Both ScanImage and Igor need to read the position and move the motorized objective (usually a Sutter mp285). This is done by communicating with one physical serial-port , a COM port. Microsoft Windows only allows one program to communicate with each physical serial-port but we need both Matlab and Igor to communicate with the same COM port. Third-party software must be used to split the physical COM port into two virtual ports, one for Matlab and one for Igor. There are a few different programs to create multiple COM ports from one physical COM port.</p>
<p>Windows 7: Serial Splitter 5.0 (Eltima Software), $100. As of Aug 2014 this is what we are using and it is working well.
Windows 7: Serial Port Splitter from www.fabulatech.com, PAY
Windows XP : Etima Software has a 32bit version, FREE
com0com,  an open source project. If anyone gets this working, please let us know. FREE
Installation
[write this]</p>
<p>Read Position. Read the current motor position.</p>
<p>Arrow Buttons. Move the mp285 motor the specified distance. All units are in um. The four arrows in the left pane move within the image plane (left, right, front, back). The two arrows in the right plane move in depth/z (up and down).</p>
<p>Video Group</p>
<p>Preview. Open the video preview window</p>
<p>Capture Image. Capture a single frame from the video preview window. The image will be placed in the mp285 canvas using the current motor position.</p>
<p>Canvas Group</p>
<p>Display Canvas. Display the current mp285 canvas. The current canvas is created when a session is initialized with ‘Initialize Session’.</p>
<p>User Save Group</p>
<p>Load. Load a user file. User files are .txt files that define the default behavior of mp285 canvas.</p>
<p>Initialize Session. Initialize a new session with name specified in ‘Session ID’. Each new session will have its own canvas and hard-drive folder.</p>
<p>HDD. Show the hard-disk-drive folder for the current session.</p>
<p>Options. Open mp285 Options panel.</p>
<p>Stack Browser. Open the Stack Browser panel</p>
<p>Process. Open the Process panel.</p>
<p>mp285 canvas with motor commands
[woops, need to upload new image with motor toolbar]</p>
<p>mp285_motor</p>
<p>mp285 Options
mp285_options</p>
<p>Serial Port (mp285) group.</p>
<p>Controls the serial port. If the wrong port is specified, it can be changed by entering the correct COM port in the ‘Serial Port’ text field.</p>
<p>Video Group.</p>
<p>Specifies the size of a video image in both pixels and um.</p>
<p>Refresh 2P Squares Group.</p>
<p>Display This Channel. The default channel (1 or 2) that will be displayed in the mp285 canvas.</p>
<p>Auto Save Canvas and Notebook. The canvas and notebook will be saved each time ‘Import ScanImage’ button is pressed.</p>
<p>Stack Group.</p>
<p>Stack Window Size. Specifies the default size of stack windows. It is useful to match this size to the default size of each channel window in ScanImage.</p>
<p>Objective Group.</p>
<p>Each row is a different objective with:</p>
<p>Name. Name of the objective. Usually 20x, 40x, 5x, etc.</p>
<p>Width. Width of field of view of objective (um)</p>
<p>Height. Height of field of view of objective (um)</p>
<p>Stepx and Stepy. Distance the mp285 motor will move when a movement arrow button is pressed. These values also appear in the mp285 canvas motor bar.</p>
<p>voxelsize. For importing ScanImage .tif files. This is the x/y voxel size (um) of a ScanImage stack taken at 1x magnification and 1024 ‘pixels per line’, 1024 ‘lines per frame’. This value is used to linearly scale all other ScanImage imports to arbitrary magnification and ‘lines per frame’/’pixels per line’.</p>
<p>Known Problems
-If you enter a space in your scanimage file name, your mp285 canvas will not work properly. If you realize this after you have already created a canvas with ‘Import Scanimage’, manually change the space in each scan image .tif file (on the hard-drive) to an underscore (_). Do NOT simply delete the space, you must change it to an underscore.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="./assets/javascripts/application-8e4952e681.js"></script>
      
      <script>app.initialize({version:"0.17.1",url:{base:"."}})</script>
      
    
    
      
    
  </body>
</html>